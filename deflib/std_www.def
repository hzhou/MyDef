
## Frames ---------------------------------------------------------
htmlcode: basic_frame
    $call @process
    <!doctype html>
    $html
	$head
	    DUMP_STUB meta
	    $call @meta
	    $call @script
	$body
	    $call @content

htmlcode: js_frame
    $call @css_global
    <!doctype html>
    $html
	$head
	    DUMP_STUB meta
	    $call @meta
	    $script
		DUMP_STUB js_init
		$call @js_global
		&call setf, window.onload
		    $call @js_onload
	$body
	    $call @content

## HTML ------------------------------------------------------
subcode: meta_refresh(time, content)
    PRINT <meta http-equiv="refresh" content="$(time);url=$(content)">

subcode: js_src(url)
    <script type="text/javascript" src="$(url)"></script>

# form_input -- one row
htmlcode: form_input(name)
    $tr
        $td label
	    $div formlabel
		PRINT $(name.title):
	    $(if: name.help)
		$div formhelp
		    PRINT $(name.help)
        $td input
	    $(if:name.type=password or name=password)
		$call input_pass, $(name)
	    $(else)
		$call input_text, $(name)

htmlcode: input_hidden(name, value)
    <input type="hidden" name="$(name)" value="$(value)">

htmlcode: input_radio(name, value, label)
    <input type="radio" name="$(name)" value="$(value)"> $(label) 

htmlcode: input_checkbox(name, label)
    <input type="checkbox" name="$(name)"> $(label)

htmlcode: input_text(name)
    <input type="text" class="textinput" name="$(name)">

htmlcode: input_pass(name)
    <input type="password" class="textinput" name="$(name)">

htmlcode: input_submit(label)
    <input type="submit" value="$(label)">

## JavaScript -----------------------------------------------------
jscode: setf(target)
    $(allow_recurse:10)
    $(target) = function(){
	BLOCK
    };

jscode: setfa(target, @arg)
    $(allow_recurse:10)
    $(target) = function($(arg)){
	BLOCK
    };

jscode: listen(obj, event)
    $(obj).addEventListener("$(event)", function(event){
	BLOCK
    }, false);

jscode: setInterval(name, time)
    $global $(name)
    $(name)=window.setInterval(function(){
	BLOCK
    }, $(time));

jscode: auto
    (function() {
	BLOCK
    }());

jscode: load_element(name)
    $global $(name)
    $(name) = document.querySelector("#$(name)");

jscode: animate
    $global time_old=0
    $function animate_update(time)
	var dt=time-time_old
	$if dt>30
	    BLOCK
	    time_old=time
	window.requestAnimationFrame(animate_update)
    animate_update(0)

# ------------------------------------------
