subcode: package_globals
    my $debug;
    ##########################################
    $call includes
    $call defines
    $call enums
    $call structs
    $call global
    our %functions
    our @function_declare_list
    our @declare_list
    our @function_stack
    our $cur_function

    our @initcodes;

    # ----
    my %function_flags;
    sub set_function_flag {
	my ($k, $v)=@_;
	$function_flags{$k}=$v;
    }
    #----
    our @func_var_hooks;
    our @func_extra_init;
    our @func_extra_release;
    our @func_pre_assign;
    our @func_post_assign;
    #----
    ############################################
    our %fntype;
    $call type_hashes

subcode: includes
    our %includes
    $sub add_include 
	my $l=shift;
	my @tlist=split /,/, $l;
	$foreach my $t in @tlist
	    $if $t=~/(\S+)/
		$includes{"<$1>"}=1;

subcode: defines
    our $define_id_base=1000;
    our %defines;

subcode: enums
    our %enums;
    our @enum_list;

subcode: global
    # -- global variables
    our $global_type={};
    our $global_flag={};
    our @global_list;

subcode: structs
    our %structs;
    our @struct_list;

subcode: type_hashes
    our %type_name=(
	c=>"unsigned char",
	i=>"int",
	j=>"int",
	k=>"int",
	m=>"int",
	n=>"int",
	f=>"float",
	d=>"double",
	count=>"int",
    );
    our %type_prefix=(
	n=>"int",
	n1=>"int8_t",
	n2=>"int16_t",
	n4=>"int32_t",
	n8=>"int64_t",
	ui=>"unsigned int",
	u=>"unsigned int",
	u1=>"uint8_t",
	u2=>"uint16_t",
	u4=>"uint32_t",
	u8=>"uint64_t",
	c=>"unsigned char",
	uc=>"unsigned char",
	b=>"int",
	s=>"char *",
	v=>"unsigned char *",
	f=>"float",
	d=>"double",
	"time"=>"time_t",
	"file"=>"FILE *",
	"strlen"=>"STRLEN",
	"has"=>"int",
	"is"=>"int",
    );

    our %stock_functions=(
	"printf"=>1,
    );

    my %lib_include=(
	glib=>"glib.h",
    );

    my %type_include=(
	time_t=>"time.h",
	int8_t=>"stdlib.h",
	int16_t=>"stdlib.h",
	int32_t=>"stdlib.h",
	int64_t=>"stdlib.h",
	uint8_t=>"stdlib.h",
	uint16_t=>"stdlib.h",
	uint32_t=>"stdlib.h",
	uint64_t=>"stdlib.h",
    );

    my %text_include=(
	"printf|perror"=>"stdio.h",
	"malloc"=>"stdlib.h",
	"str(len|dup|cpy)|memcpy"=>"string.h",
	"\\bopen\\("=>"fcntl.h",
	"sin|cos|sqrt|pow"=>"math.h",
	"fstat"=>"sys/stat.h",
    );

    sub register_type_prefix {
	my ($k, $v)=@_;
	$type_prefix{$k}=$v;
    }

