include: c/regex.def

page: test
    subcode: main
	$list n_main

    fncode: n_main
	$local s_buf[200]
	&call open_r, "/home/hzhou/MailArchive/spam/2013_02.mbox"
	    $while fgets(s_buf, 200, file_in)
		# Envelop-From: vickyad86@schwegler.com Wed Feb 29 22:17:19 2012
		$if $regex s_buf=~/^From (\S+)\s+(\w+)\s+(\w+)\s+(\d+)\s+(\d+:\d+:\d+)\s+(\d+)/
		    #$regex zero: addr, day, mon, date, time, year => 1, 2, 3, 4, 5, 6
		    $regex addr, day, mon, date, time, year => 1, 2, 3, 4, 5, 6
		    printf("Envelop-From: [%s %s %s] %s\n", ts_mon, ts_date, ts_time, ts_addr)
		$elif $regex s_buf=~/^To:.*<(\S+)>/
		    $regex to=>1
		    printf("\tTo: %s\n", ts_to)


