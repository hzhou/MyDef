include: c/darray.def

page: test, basic_frame
    subcode: main
	# $call test_foreach_static
	# $call test_foreach_dynamic
	$call test_darray


subcode: test_foreach_static
    $block
	$print "\ntest foreach pn_test ..."
	$my pn_test[10]
	$foreach pn_test
	    $(t)=$(i)*2+1
	    $print "    %d: %d", $(i), $(t)

subcode: test_foreach_dynamic
    $block
	n=10
	$local_allocate(n) pn_test
	$foreach pn_test
	    $(t)=$(i)*2
	    $print "    %d: %d", $(i), $(t)

#---------------------------------------- 
subcode: test_darray
    $my darray P: int, char
    P.$resize 10
    $foreach P
	$(t)=$(i), $(i)+'A'
	$print "    %d: %c", $(i), $(t).2
    P.$resize 0
    P.$push 108, 108
    $print "last item: %d", P[-1].1

    (n, c)=P.$pop()
    $print n = $n, c = $c
