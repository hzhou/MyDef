page: test
    module: perl

    DUMP_STUB init
    $call test_1
    $(block:init)
        $a = "Changed in \x24(block:init)"

    &call test, stub:...
        $print Another stub: $(stub:make_string)!
    &call test, stub:...
        $if $(stub:make_cond)
            $print STUB in \$if works!


    &call test, INSERT_STUB
        $print direct stub --> {STUB} <--.
        INSERT_STUB _dummy_
        $(block:_dummy_)
            $(mode:bypass)
            a
            b
            c

    $print Done.   All is well

    subcode: test(stubtype)
        $print \x24($(stubtype))\n    -
        BLOCK

subcode: test_1
    $global $a = 1
    $print a = $a

bypasscode: make_string
    Hello
    World,
    again
    
bypasscode: make_cond
    1
