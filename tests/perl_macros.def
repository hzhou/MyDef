page: test
    a: b
    b: 1

    $(if:1)
        $(for:a in a-c,1-5)
            $print "$(a)-"
        $print

        my @tlist=($(join:,:"*":a-z))
        print join('-', @tlist), "\n"
        my $x = $(nest:5:sqrt(*):10)
        $print x=$x
    $(else)
        print "page macro a: $(a)\n"
        $(if:word:a)
            $warn macro a  is a word : [$(a)]
        $(if:!word:b)
            $warn macro b  is not a word : [$(b)]
        $call test_named_macros
        $call test_eval, test_case
        $call test_inline, example
        $call test_for_list
        $call test_macro_join
        $call test_macro_split

subcode: test_named_macros
    $call subset1
    $print test_named_macros: $(a1), $(a2), $(a3), $(a4), $(a5), $(a6)
    subcode: subset1
        $(setdef:a1=def)
        $(setmacro:a2=macro)
        $(setpage:a3=page)
        $(set0:a4=def)
        $(set1:a5=macro)
        $(set2:a6=page)

subcode: test_eval(t)
    $(eval:t2=ucfirst("$(t)"))
    $print test_eval: $(t)
    $print "\t ucfirst: $(t2)"

subcode: test_inline(t)
    $(set:inline=test_inline(\"$1\"))
    $print "test_inline: $(t) -> $(inline:$(t))"

subcode: test_for_list
    $print "\nfor list:\n"
    $(for:i, j, k and x, y, z and 1, 2, 3)
        $print "   $2_$1 -> $3"

subcode: test_macro_join
    $(set:cond) join, ' or ', 'N!=*', 2, 4, 8, 16
    $print test_macro_join: $(cond)

subcode: test_macro_split
    $(set:s=a-b-c)
    $(split:-:s)
    $print split $(s): $(p_1) - $(p_2) - $(p_3)

    $(set:s=192.168.2.8)
    $(split:\.:s)
    $print split $(s): $(p_1) - $(p_2) - $(p_3) - $(p_4)
