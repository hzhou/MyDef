include: output.def

page: output_cpp, inherit_c
    type: pm
    output_dir: lib/MyDef
    ext: cpp
    init_mode: sub
    package: MyDef::output_cpp

subcode: on_dumpout
    my $cnt=0
    my $cnt_std=0
    $while my ($k, $t)=each %$(C)includes
	$if $k=~/<(iostream|string|bitset|deque|list|map|queue|set|stack|vector)/
	    push @$f, "#include <$1>\n"
	    $cnt_std++
	$elif $k=~/<(stdio|stdlib|string|math|time)\.h>/
	    push @$f, "#include <c$1>\n"
	$else
	    push @$f, "#include $k\n"
	$cnt++
    $if $cnt>0
	$if $cnt_std>0
	    push @$f, "using namespace std;\n"
	push @$f, "\n"

    %$(C)includes=()

