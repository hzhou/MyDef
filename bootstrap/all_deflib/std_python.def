#-- define macro PYTHON3 for python 3 in deflib/python/_config.def
include: python/_config.def?
macros:
    comment: #
    ternary: $2 if $1 else $3

subcode: basic_frame
    # I don't really see point of this, albeit works.
    $def main
        $call @main

    $if __name__ == "__main__"
        main()

#---------------------------------------- 
subcode: open_r(name)
    with open($(name), "r") as In:
        for line in In:
            BLOCK

subcode: open_w(name)
    with open($(name), "w") as Out:
        $(set:print_to=Out)
        BLOCK

#---------------------------------------- 
subcode: dict_inc(V, key)
    $if not $(key) in $(V)
        $(V)[$(key)] = 1
    $else
        $(V)[$(key)] +=1

#---------------------------------------- 
include: ext.def
perlcode: quote
    my $var = $param
    $call grab_codelist
    $if $codelist
        push @$out, "$var = \"\"\"\n"
        $foreach $t in @$codelist
            push @$out, "$t\n"
        push @$out, "\"\"\"\n"


#---- timing --------------------------- 
subcode: start_time
    $import datetime from datetime
    start_time = datetime.now()

subcode: print_time(msg)
    time_diff = datetime.now()-start_time
    $print $(msg): $time_diff

#---------------------
subcode: error(@msg)
    # $print stack: $stack
    raise Exception($(msg))


